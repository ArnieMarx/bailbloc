<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <title>Bail Bloc Settings</title>
  <link rel="stylesheet" href="style.css">
  
</head>
<body>

  <div id="app">
    <h1>Settings</h1>
    <form>
      <div class="form-element">
        <label for="max-usage">Max CPU usage:</label>
        <input v-model="maxUsage" @change="update"  id="max-usage" type="range" min="10" max="100" step="1">
        <span>{{maxUsage}}%</span>
      </div>

      <div class="form-element">
        <input v-model="autostart" @change="update"  id="autostart" type="checkbox">
        <label for="autostart">Start Bail Bloc on login</label>
      </div>

      <div class="form-element">
        <input v-model="pauseOnLowPower" @change="update" id="should-pause" type="checkbox">
        <label for="should-pause">Pause when on battery</label>
      </div>
      <button @click="close">Done</button>
    </form>
  </div>

  <script src="vue.min.js"></script>
  <script>
    const {ipcRenderer, remote} = require('electron');

    let currentWindow = remote.getCurrentWindow();

    var app = new Vue({
      el: '#app',
      data: {
        maxUsage: currentWindow.settings.maxUsage,
        pauseOnLowPower: currentWindow.settings.pauseOnLowPower,
        autostart: currentWindow.settings.autostart
      },
      methods: {
        close() {
          window.close();
        },
        update() {
          ipcRenderer.send('changeSettings', {
            maxUsage: this.maxUsage,
            pauseOnLowPower: this.pauseOnLowPower,
            autostart: this.autostart
          });
        }
      }
    });
  </script>
</body>
</html>
